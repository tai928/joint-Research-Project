<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>日韓共同研究</title>
  <meta name="description" content="日韓共同研究の成果をまとめたWebサイト" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="wrap">

    <!-- ===== HERO（タイトル＋背景コラージュ）===== -->
    <header class="hero" aria-label="Site Header">
      <div class="hero-bg" aria-hidden="true">
        <div class="hero-bg-left"></div>
        <div class="hero-bg-right"></div>
      </div>

      <div class="hero-content">
        <div class="hero-top">
          <div class="title">
            <h1 data-i18n="site_title">日韓共同研究</h1>
            <p data-i18n="site_subtitle">左右に両校の概要を並べ、ボタンにホバーで詳細が表示されます。</p>
          </div>

          <div class="topbar-right">
            <div class="pill">
              <span class="dot"></span>
              <span data-i18n="pill_text">Joint Research Showcase</span>
            </div>

            <nav class="lang-switch" aria-label="Language switch">
              <button class="lang-btn" data-lang="ja" type="button">日本語</button>
              <button class="lang-btn" data-lang="en" type="button">English</button>
              <button class="lang-btn" data-lang="ko" type="button">한국어</button>
            </nav>
          </div>
        </div>

        <div class="hero-hint">
          <span class="hint-chip" data-i18n="hero_hint_left">左：韓国（光州ソフトウェアマイスター高校）</span>
          <span class="hint-chip" data-i18n="hero_hint_right">右：日本（都立科学技術高等学校）</span>
        </div>
      </div>
    </header>

    <!-- ===== OVERVIEW（左右カード）===== -->
    <main class="grid" aria-label="School Overviews">

      <!-- 左：韓国 -->
      <section class="card kr" aria-label="Korean High School Overview">
        <div class="badge">
          <span class="flag">🇰🇷</span>
          <span data-i18n="kr_badge">Korea / 高校概要</span>
        </div>

        <h2 data-i18n="kr_school_name">光州ソフトウェアマイスター高校</h2>

        <div class="meta">
          <span class="chip" data-i18n="kr_chip_location">所在地：光州広域市</span>
          <span class="chip" data-i18n="kr_chip_field">分野：ソフトウェア / 情報</span>
          <span class="chip" data-i18n="kr_chip_team">参加メンバー：（後で追記）</span>
        </div>

        <div class="section">
          <h3 data-i18n="features_title">学校の特徴</h3>
          <ul>
            <li data-i18n="kr_feature_1">ソフトウェア分野に特化した専門教育</li>
            <li data-i18n="kr_feature_2">実践的な開発・制作を中心とした学習</li>
            <li data-i18n="kr_feature_3">チーム開発・発表活動の経験を重視</li>
          </ul>
        </div>

        <div class="section">
          <h3 data-i18n="role_title">共同研究での役割</h3>
          <ul>
            <li data-i18n="kr_role_1">データ収集 / 設計・検証 / 共同発表の準備</li>
            <li data-i18n="kr_role_2">成果物：レポート、分析結果、発表資料</li>
          </ul>
        </div>

        <div class="actions">
          <div class="hover-wrap">
            <a class="btn kr" href="#research" data-i18n="btn_research">研究内容を見る</a>
            <div class="hover-detail kr">
              <strong data-i18n="tip_research_title">研究の要点</strong>
              <p data-i18n="tip_research_text">図と画像で、目的→方法→結果→考察→今後をスライド形式でまとめます。📊</p>
            </div>
          </div>

          <div class="hover-wrap">
            <a class="btn" href="#members" data-i18n="btn_members">メンバー</a>
            <div class="hover-detail">
              <strong data-i18n="tip_members_title">参加者</strong>
              <p data-i18n="kr_members_names">（メンバー確定後に追記）</p>
            </div>
          </div>
        </div>
      </section>

      <!-- 右：日本 -->
      <section class="card jp" aria-label="Japanese High School Overview">
        <div class="badge">
          <span class="flag">🇯🇵</span>
          <span data-i18n="jp_badge">Japan / 高校概要</span>
        </div>

        <h2 data-i18n="jp_school_name">都立科学技術高等学校</h2>

        <div class="meta">
          <span class="chip" data-i18n="jp_chip_location">所在地：Tokyo</span>
          <span class="chip" data-i18n="jp_chip_field">分野：Science & Tech</span>
          <span class="chip" data-i18n="jp_chip_team">参加メンバー：鈴鹿泰正、島村真央</span>
        </div>

        <div class="section">
          <h3 data-i18n="features_title">学校の特徴</h3>
          <ul>
            <li data-i18n="jp_feature_1">探究・課題研究中心のカリキュラム</li>
            <li data-i18n="jp_feature_2">制作（Web / アプリ / 実験）に強い</li>
            <li data-i18n="jp_feature_3">外部発表・地域連携の実績</li>
          </ul>
        </div>

        <div class="section">
          <h3 data-i18n="role_title">共同研究での役割</h3>
          <ul>
            <li data-i18n="jp_role_1">Web実装 / UI設計 / 可視化 / まとめ</li>
            <li data-i18n="jp_role_2">成果物：Web、動画、展示ポスター</li>
          </ul>
        </div>

        <div class="actions">
          <div class="hover-wrap">
            <a class="btn jp" href="#research" data-i18n="btn_research">研究内容を見る</a>
            <div class="hover-detail jp">
              <strong data-i18n="tip_research_title">研究の要点</strong>
              <p data-i18n="tip_research_text">図と画像で、目的→方法→結果→考察→今後をスライド形式でまとめます。📊</p>
            </div>
          </div>

          <div class="hover-wrap">
            <a class="btn" href="#members" data-i18n="btn_members">メンバー</a>
            <div class="hover-detail">
              <strong data-i18n="tip_members_title">参加者</strong>
              <p data-i18n="jp_members_names">鈴鹿泰正、島村真央</p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- ===== RESEARCH SLIDER（図＋画像スライド）===== -->
    <section id="research" class="below research" aria-label="Research Slides">
      <div class="research-head">
        <h2 data-i18n="section_research_title">研究内容（Research）</h2>
        <p class="below-muted" data-i18n="section_research_text">
          図と画像で、目的→方法→結果→考察→今後をスライド形式でまとめます。📊
        </p>
      </div>

      <div class="slider" data-slider>
        <div class="slides" data-slides>

          <!-- Slide 1 -->
          <article class="slide is-active" data-slide>
            <div class="slide-top">
              <div class="slide-kicker">Slide 01</div>
              <h3 class="slide-title" data-i18n="s1_title">研究テーマ</h3>
              <p class="slide-text" data-i18n="s1_text">研究の背景とテーマを短く説明します。</p>
            </div>

            <div class="slide-grid">
              <figure class="media">
                <img src="images/slide-01-diagram.png" alt="研究の概要図" loading="lazy">
                <figcaption data-i18n="s1_cap1">図：全体像（フロー、概念図、構成図）</figcaption>
              </figure>

              <figure class="media">
                <img src="images/slide-01-photo.jpg" alt="研究に関する写真" loading="lazy">
                <figcaption data-i18n="s1_cap2">画像：実験・制作・計測の様子</figcaption>
              </figure>
            </div>

            <div class="slide-notes">
              <div class="note"><strong data-i18n="label_goal">目的：</strong><span data-i18n="s1_note1">（例）◯◯を明らかにする</span></div>
              <div class="note"><strong data-i18n="label_hyp">仮説：</strong><span data-i18n="s1_note2">（例）◯◯だと◯◯になる</span></div>
            </div>
          </article>

          <!-- Slide 2 -->
          <article class="slide" data-slide>
            <div class="slide-top">
              <div class="slide-kicker">Slide 02</div>
              <h3 class="slide-title" data-i18n="s2_title">方法（実験 / 実装）</h3>
              <p class="slide-text" data-i18n="s2_text">手順・条件・使用技術を整理します。</p>
            </div>

            <div class="slide-grid">
              <figure class="media">
                <img src="images/slide-02-diagram.png" alt="方法の図" loading="lazy">
                <figcaption data-i18n="s2_cap1">図：手順・システム構成・評価設計</figcaption>
              </figure>

              <figure class="media">
                <img src="images/slide-02-photo.jpg" alt="方法の写真" loading="lazy">
                <figcaption data-i18n="s2_cap2">画像：画面キャプチャ / 作業の様子</figcaption>
              </figure>
            </div>

            <div class="slide-notes">
              <div class="note"><strong data-i18n="label_proc">手順：</strong><span data-i18n="s2_note1">（例）①… ②… ③…</span></div>
              <div class="note"><strong data-i18n="label_eval">評価：</strong><span data-i18n="s2_note2">（例）精度 / 時間 / 再現性</span></div>
            </div>
          </article>

          <!-- Slide 3 -->
          <article class="slide" data-slide>
            <div class="slide-top">
              <div class="slide-kicker">Slide 03</div>
              <h3 class="slide-title" data-i18n="s3_title">結果（グラフ / 比較）</h3>
              <p class="slide-text" data-i18n="s3_text">結果のポイントを最大3点に絞って示します。</p>
            </div>

            <div class="slide-grid">
              <figure class="media">
                <img src="images/slide-03-diagram.png" alt="結果の図" loading="lazy">
                <figcaption data-i18n="s3_cap1">図：グラフ、表、比較図</figcaption>
              </figure>

              <figure class="media">
                <img src="images/slide-03-photo.jpg" alt="成果物の写真" loading="lazy">
                <figcaption data-i18n="s3_cap2">画像：成果物 / 実験結果の写真</figcaption>
              </figure>
            </div>

            <div class="slide-notes">
              <div class="note"><strong data-i18n="label_main">主結果：</strong><span data-i18n="s3_note1">（例）◯◯が◯◯%改善</span></div>
              <div class="note"><strong data-i18n="label_disc">考察：</strong><span data-i18n="s3_note2">（例）◯◯が原因と推定</span></div>
            </div>
          </article>

          <!-- Slide 4 -->
          <article class="slide" data-slide>
            <div class="slide-top">
              <div class="slide-kicker">Slide 04</div>
              <h3 class="slide-title" data-i18n="s4_title">今後（改善案 / 展開）</h3>
              <p class="slide-text" data-i18n="s4_text">次の改善と、共同研究としての展開をまとめます。</p>
            </div>

            <div class="slide-grid">
              <figure class="media">
                <img src="images/slide-04-diagram.png" alt="今後の図" loading="lazy">
                <figcaption data-i18n="s4_cap1">図：ロードマップ / 改善計画</figcaption>
              </figure>

              <figure class="media">
                <img src="images/slide-04-photo.jpg" alt="今後のイメージ" loading="lazy">
                <figcaption data-i18n="s4_cap2">画像：次の取り組み（イメージ）</figcaption>
              </figure>
            </div>

            <div class="slide-notes">
              <div class="note"><strong data-i18n="label_impr">改善：</strong><span data-i18n="s4_note1">（例）データ量拡張、UI改善</span></div>
              <div class="note"><strong data-i18n="label_next">展開：</strong><span data-i18n="s4_note2">（例）授業での活用、公開デモ</span></div>
            </div>
          </article>

        </div>

        <div class="slider-ui">
          <button class="nav-btn" type="button" data-prev aria-label="前のスライド">←</button>
          <div class="dots" data-dots aria-label="スライド選択"></div>
          <button class="nav-btn" type="button" data-next aria-label="次のスライド">→</button>
        </div>
      </div>
    </section>

    <!-- ===== MEMBERS（アンカー先）===== -->
    <section id="members" class="below" aria-label="Members">
      <h2 data-i18n="section_members_title">メンバー（Members）</h2>
      <p class="below-muted" data-i18n="section_members_text">参加者情報をここに追加します。</p>
    </section>

    <footer>
      <span data-i18n="footer_text">© Joint Research Project</span>
      <span class="sep"> / </span>
      <span data-i18n="footer_updated">Last updated: 2025-12-22</span>
    </footer>

  </div>

  <script>
    // ===== i18n（使ってるキーだけ）=====
    const I18N = {
      ja: {
        page_title: "日韓共同研究",
        site_title: "日韓共同研究",
        site_subtitle: "左右に両校の概要を並べ、ボタンにホバーで詳細が表示されます。",
        pill_text: "Joint Research Showcase",
        hero_hint_left: "左：韓国（光州ソフトウェアマイスター高校）",
        hero_hint_right: "右：日本（都立科学技術高等学校）",

        kr_badge: "Korea / 高校概要",
        kr_school_name: "光州ソフトウェアマイスター高校",
        kr_chip_location: "所在地：光州広域市",
        kr_chip_field: "分野：ソフトウェア / 情報",
        kr_chip_team: "参加メンバー：（後で追記）",
        kr_feature_1: "ソフトウェア分野に特化した専門教育",
        kr_feature_2: "実践的な開発・制作を中心とした学習",
        kr_feature_3: "チーム開発・発表活動の経験を重視",
        kr_role_1: "データ収集 / 設計・検証 / 共同発表の準備",
        kr_role_2: "成果物：レポート、分析結果、発表資料",
        kr_members_names: "（メンバー確定後に追記）",

        jp_badge: "Japan / 高校概要",
        jp_school_name: "都立科学技術高等学校",
        jp_chip_location: "所在地：Tokyo",
        jp_chip_field: "分野：Science & Tech",
        jp_chip_team: "参加メンバー：鈴鹿泰正、島村真央",
        jp_feature_1: "探究・課題研究中心のカリキュラム",
        jp_feature_2: "制作（Web / アプリ / 実験）に強い",
        jp_feature_3: "外部発表・地域連携の実績",
        jp_role_1: "Web実装 / UI設計 / 可視化 / まとめ",
        jp_role_2: "成果物：Web、動画、展示ポスター",
        jp_members_names: "鈴鹿泰正、島村真央",

        features_title: "学校の特徴",
        role_title: "共同研究での役割",
        btn_research: "研究内容を見る",
        btn_members: "メンバー",
        tip_research_title: "研究の要点",
        tip_research_text: "図と画像で、目的→方法→結果→考察→今後をスライド形式でまとめます。📊",
        tip_members_title: "参加者",

        section_research_title: "研究内容（Research）",
        section_research_text: "図と画像で、目的→方法→結果→考察→今後をスライド形式でまとめます。📊",
        section_members_title: "メンバー（Members）",
        section_members_text: "参加者情報をここに追加します。",

        s1_title: "研究テーマ",
        s1_text: "研究の背景とテーマを短く説明します。",
        s1_cap1: "図：全体像（フロー、概念図、構成図）",
        s1_cap2: "画像：実験・制作・計測の様子",
        s1_note1: "（例）◯◯を明らかにする",
        s1_note2: "（例）◯◯だと◯◯になる",

        s2_title: "方法（実験 / 実装）",
        s2_text: "手順・条件・使用技術を整理します。",
        s2_cap1: "図：手順・システム構成・評価設計",
        s2_cap2: "画像：画面キャプチャ / 作業の様子",
        s2_note1: "（例）①… ②… ③…",
        s2_note2: "（例）精度 / 時間 / 再現性",

        s3_title: "結果（グラフ / 比較）",
        s3_text: "結果のポイントを最大3点に絞って示します。",
        s3_cap1: "図：グラフ、表、比較図",
        s3_cap2: "画像：成果物 / 実験結果の写真",
        s3_note1: "（例）◯◯が◯◯%改善",
        s3_note2: "（例）◯◯が原因と推定",

        s4_title: "今後（改善案 / 展開）",
        s4_text: "次の改善と、共同研究としての展開をまとめます。",
        s4_cap1: "図：ロードマップ / 改善計画",
        s4_cap2: "画像：次の取り組み（イメージ）",
        s4_note1: "（例）データ量拡張、UI改善",
        s4_note2: "（例）授業での活用、公開デモ",

        label_goal: "目的：",
        label_hyp: "仮説：",
        label_proc: "手順：",
        label_eval: "評価：",
        label_main: "主結果：",
        label_disc: "考察：",
        label_impr: "改善：",
        label_next: "展開：",

        footer_text: "© Joint Research Project",
        footer_updated: "Last updated: 2025-12-22",
      },

      en: {
        page_title: "Japan–Korea Joint Research",
        site_title: "Japan–Korea Joint Research",
        site_subtitle: "Two school overviews are shown side-by-side, and details appear when you hover the buttons.",
        pill_text: "Joint Research Showcase",
        hero_hint_left: "Left: Korea (Gwangju Software Meister High School)",
        hero_hint_right: "Right: Japan (Tokyo Metropolitan Science and Technology High School)",

        kr_badge: "Korea / School Overview",
        kr_school_name: "Gwangju Software Meister High School",
        kr_chip_location: "Location: Gwangju, Republic of Korea",
        kr_chip_field: "Field: Software / Information Technology",
        kr_chip_team: "Members: (to be added)",
        kr_feature_1: "Specialized education focused on software",
        kr_feature_2: "Learning centered on practical development and building",
        kr_feature_3: "Emphasis on team development and presentations",
        kr_role_1: "Data collection / design & validation / joint presentation preparation",
        kr_role_2: "Outputs: report, analysis results, presentation slides",
        kr_members_names: "(to be added)",

        jp_badge: "Japan / School Overview",
        jp_school_name: "Tokyo Metropolitan Science and Technology High School",
        jp_chip_location: "Location: Tokyo",
        jp_chip_field: "Field: Science & Tech",
        jp_chip_team: "Members: Taisei Suzuka, Mao Shimamura",
        jp_feature_1: "Curriculum centered on inquiry and research projects",
        jp_feature_2: "Strong in building (Web / apps / experiments)",
        jp_feature_3: "Track record of external presentations and collaborations",
        jp_role_1: "Web implementation / UI design / visualization / documentation",
        jp_role_2: "Outputs: website, video, exhibition poster",
        jp_members_names: "Taisei Suzuka, Mao Shimamura",

        features_title: "School Features",
        role_title: "Role in the Joint Project",
        btn_research: "View Research",
        btn_members: "Members",
        tip_research_title: "Research Summary",
        tip_research_text: "Slides summarize goals → methods → results → discussion → next steps with diagrams and photos. 📊",
        tip_members_title: "Participants",

        section_research_title: "Research",
        section_research_text: "Slides summarize goals → methods → results → discussion → next steps with diagrams and photos. 📊",
        section_members_title: "Members",
        section_members_text: "Add participant information here.",

        s1_title: "Research Topic",
        s1_text: "Briefly describe the background and the topic.",
        s1_cap1: "Diagram: overview (flow / concept / structure)",
        s1_cap2: "Photo: experiment / building / measurement",
        s1_note1: "(Example) Clarify ○○",
        s1_note2: "(Example) If ○○, then ○○",

        s2_title: "Method (Experiment / Implementation)",
        s2_text: "Organize procedures, conditions, and technologies used.",
        s2_cap1: "Diagram: procedure / system / evaluation design",
        s2_cap2: "Photo: screenshots / work scene",
        s2_note1: "(Example) 1… 2… 3…",
        s2_note2: "(Example) accuracy / time / reproducibility",

        s3_title: "Results (Graphs / Comparison)",
        s3_text: "Show up to three key points from the results.",
        s3_cap1: "Diagram: graphs, tables, comparisons",
        s3_cap2: "Photo: outputs / result images",
        s3_note1: "(Example) ○○ improved by ○○%",
        s3_note2: "(Example) ○○ is considered the cause",

        s4_title: "Next Steps (Improvements / Expansion)",
        s4_text: "Summarize improvements and future collaboration plans.",
        s4_cap1: "Diagram: roadmap / improvement plan",
        s4_cap2: "Photo: next action (image)",
        s4_note1: "(Example) more data, UI improvements",
        s4_note2: "(Example) classroom use, public demo",

        label_goal: "Goal: ",
        label_hyp: "Hypothesis: ",
        label_proc: "Procedure: ",
        label_eval: "Evaluation: ",
        label_main: "Main result: ",
        label_disc: "Discussion: ",
        label_impr: "Improvement: ",
        label_next: "Expansion: ",

        footer_text: "© Joint Research Project",
        footer_updated: "Last updated: 2025-12-22",
      },

      ko: {
        page_title: "한일 공동연구",
        site_title: "한일 공동연구",
        site_subtitle: "양교 개요를 좌우로 배치하고, 버튼에 마우스를 올리면 상세가 표시됩니다.",
        pill_text: "Joint Research Showcase",
        hero_hint_left: "왼쪽: 한국(광주 소프트웨어 마이스터 고등학교)",
        hero_hint_right: "오른쪽: 일본(도쿄도립 과학기술 고등학교)",

        kr_badge: "Korea / 학교 개요",
        kr_school_name: "광주 소프트웨어 마이스터 고등학교",
        kr_chip_location: "지역: 광주광역시",
        kr_chip_field: "분야: 소프트웨어 / 정보",
        kr_chip_team: "참여 멤버: (추후 추가)",
        kr_feature_1: "소프트웨어 분야에 특화된 전문 교육",
        kr_feature_2: "실습 중심의 개발·제작 학습",
        kr_feature_3: "팀 개발 및 발표 경험을 중시",
        kr_role_1: "데이터 수집 / 설계·검증 / 공동 발표 준비",
        kr_role_2: "산출물: 보고서, 분석 결과, 발표자료",
        kr_members_names: "(추후 추가)",

        jp_badge: "Japan / 학교 개요",
        jp_school_name: "도쿄도립 과학기술 고등학교",
        jp_chip_location: "지역: Tokyo",
        jp_chip_field: "분야: Science & Tech",
        jp_chip_team: "참여 멤버: 스즈카 타이세이, 시마무라 마오",
        jp_feature_1: "탐구·연구 프로젝트 중심 커리큘럼",
        jp_feature_2: "제작(Web / 앱 / 실험)에 강점",
        jp_feature_3: "외부 발표 및 연계 실적",
        jp_role_1: "Web 구현 / UI 설계 / 시각화 / 정리",
        jp_role_2: "산출물: 웹사이트, 영상, 전시 포스터",
        jp_members_names: "스즈카 타이세이, 시마무라 마오",

        features_title: "학교 특징",
        role_title: "공동연구에서의 역할",
        btn_research: "연구 내용 보기",
        btn_members: "멤버",
        tip_research_title: "연구 요점",
        tip_research_text: "도표와 이미지로 목표→방법→결과→고찰→향후 계획을 슬라이드로 정리합니다. 📊",
        tip_members_title: "참여자",

        section_research_title: "연구 내용(Research)",
        section_research_text: "도표와 이미지로 목표→방법→결과→고찰→향후 계획을 슬라이드로 정리합니다. 📊",
        section_members_title: "멤버(Members)",
        section_members_text: "참여자 정보를 여기에 추가합니다.",

        s1_title: "연구 주제",
        s1_text: "연구의 배경과 주제를 간단히 설명합니다.",
        s1_cap1: "도표: 전체 구성(흐름/개념/구성도)",
        s1_cap2: "이미지: 실험·제작·측정 모습",
        s1_note1: "(예) ○○을 밝힌다",
        s1_note2: "(예) ○○이면 ○○이다",

        s2_title: "방법(실험 / 구현)",
        s2_text: "절차·조건·사용 기술을 정리합니다.",
        s2_cap1: "도표: 절차/시스템/평가 설계",
        s2_cap2: "이미지: 화면 캡처/작업 모습",
        s2_note1: "(예) ①… ②… ③…",
        s2_note2: "(예) 정확도/시간/재현성",

        s3_title: "결과(그래프 / 비교)",
        s3_text: "결과의 핵심 포인트를 최대 3개로 정리합니다.",
        s3_cap1: "도표: 그래프/표/비교도",
        s3_cap2: "이미지: 산출물/결과 사진",
        s3_note1: "(예) ○○이 ○○% 개선",
        s3_note2: "(예) 원인은 ○○로 추정",

        s4_title: "향후(개선안 / 전개)",
        s4_text: "개선과 공동연구의 전개를 정리합니다.",
        s4_cap1: "도표: 로드맵/개선 계획",
        s4_cap2: "이미지: 다음 활동(이미지)",
        s4_note1: "(예) 데이터 확장, UI 개선",
        s4_note2: "(예) 수업 활용, 공개 데모",

        label_goal: "목표: ",
        label_hyp: "가설: ",
        label_proc: "절차: ",
        label_eval: "평가: ",
        label_main: "주요 결과: ",
        label_disc: "고찰: ",
        label_impr: "개선: ",
        label_next: "전개: ",

        footer_text: "© Joint Research Project",
        footer_updated: "Last updated: 2025-12-22",
      }
    };

    function setLanguage(lang) {
      const dict = I18N[lang] || I18N.ja;

      document.documentElement.lang = lang;
      document.title = dict.page_title || dict.site_title || "日韓共同研究";

      document.querySelectorAll("[data-i18n]").forEach(el => {
        const key = el.getAttribute("data-i18n");
        if (dict[key] !== undefined) el.textContent = dict[key];
      });

      document.querySelectorAll(".lang-btn").forEach(btn => {
        btn.classList.toggle("active", btn.dataset.lang === lang);
      });

      try { localStorage.setItem("lang", lang); } catch (_) {}
    }

    (function initLang(){
      let lang = "ja";
      try {
        const saved = localStorage.getItem("lang");
        if (saved && I18N[saved]) lang = saved;
        else {
          const nav = (navigator.language || "ja").toLowerCase();
          if (nav.startsWith("ko")) lang = "ko";
          else if (nav.startsWith("en")) lang = "en";
        }
      } catch (_) {}

      setLanguage(lang);

      document.querySelectorAll(".lang-btn").forEach(btn => {
        btn.addEventListener("click", () => setLanguage(btn.dataset.lang));
      });
    })();

    // ===== Research Slider（dots / arrows / keyboard / swipe）=====
    (function(){
      const root = document.querySelector("[data-slider]");
      if(!root) return;

      const slidesWrap = root.querySelector("[data-slides]");
      const slides = Array.from(root.querySelectorAll("[data-slide]"));
      const btnPrev = root.querySelector("[data-prev]");
      const btnNext = root.querySelector("[data-next]");
      const dotsWrap = root.querySelector("[data-dots]");

      let index = Math.max(0, slides.findIndex(s => s.classList.contains("is-active")));
      if(index < 0) index = 0;

      dotsWrap.innerHTML = "";
      const dots = slides.map((_, i) => {
        const b = document.createElement("button");
        b.type = "button";
        b.className = "dot-btn";
        b.setAttribute("aria-label", `Slide ${i+1}`);
        b.addEventListener("click", () => go(i));
        dotsWrap.appendChild(b);
        return b;
      });

      function render(){
        slides.forEach((s, i) => s.classList.toggle("is-active", i === index));
        dots.forEach((d, i) => d.classList.toggle("is-active", i === index));
        btnPrev.disabled = slides.length <= 1;
        btnNext.disabled = slides.length <= 1;
      }

      function go(i){
        index = (i + slides.length) % slides.length;
        render();
      }

      btnPrev.addEventListener("click", () => go(index - 1));
      btnNext.addEventListener("click", () => go(index + 1));

      window.addEventListener("keydown", (e) => {
        if(document.activeElement && ["INPUT","TEXTAREA","SELECT"].includes(document.activeElement.tagName)) return;
        if(e.key === "ArrowLeft") go(index - 1);
        if(e.key === "ArrowRight") go(index + 1);
      });

      let startX = null;
      slidesWrap.addEventListener("touchstart", (e) => {
        startX = e.touches[0].clientX;
      }, {passive:true});

      slidesWrap.addEventListener("touchend", (e) => {
        if(startX === null) return;
        const endX = e.changedTouches[0].clientX;
        const dx = endX - startX;
        startX = null;
        if(Math.abs(dx) < 40) return;
        if(dx > 0) go(index - 1);
        else go(index + 1);
      }, {passive:true});

      render();
    })();
  </script>
</body>
</html>
